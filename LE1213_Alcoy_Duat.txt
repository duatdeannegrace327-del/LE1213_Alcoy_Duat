#include <stdio.h>

int main()
{
    FILE *file;
    int studentNumber;
    int studentAge;
    char studentName[30];
    char studentCourse[30];
    char readingDatabase[30];

    file = fopen("student_records.txt", "w");

    if(file== NULL){
        printf("Error. File not Found\n");
        return 1;
    }

    printf("\nWriting Student Database:\n");
    printf("How many students do you want to record?: ");
    scanf("%d", &studentNumber);
    getchar();

    fprintf(file, "\nReading Student Database: \n");

    for(int i=0; i<studentNumber; i++)
    {
        printf("\nStudent %d\n", i + 1);
        printf("Enter Name: ");
        fgets(studentName, sizeof(studentName), stdin);

        printf("Enter Age: ");
        scanf("%d", &studentAge);
        getchar();

        printf("Enter Course: ");
        fgets(studentCourse, sizeof(studentCourse), stdin);

        fprintf(file, "\nStudent %d\n", i + 1);
        fprintf(file, "Name: %s", studentName);
        fprintf(file, "Age: %d\n", studentAge);
        fprintf(file, "Course: %s\n", studentCourse);
        fprintf(file, "------------------------------\n");
    }

    fclose(file);

    printf("\nStudent database successfully saved to file\n");
    printf("\n------------------------------\n");

    file = fopen("student_records.txt", "r");

    if(file == NULL)
    {
        printf("Error. File not found");
        return 1;
    }

    while (fgets(readingDatabase, sizeof(readingDatabase), file))
    {
        printf("%s", readingDatabase);
    }

    fclose(file);

    return 0;
}
